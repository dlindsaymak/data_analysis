<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.5.57">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>Cleaning Data – Getting Started With Data Analysis</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { display: inline-block; text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>


<script src="site_libs/quarto-nav/quarto-nav.js"></script>
<script src="site_libs/quarto-nav/headroom.min.js"></script>
<script src="site_libs/clipboard/clipboard.min.js"></script>
<script src="site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="site_libs/quarto-search/fuse.min.js"></script>
<script src="site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="./">
<link href="./downloading.html" rel="prev">
<script src="site_libs/quarto-html/quarto.js"></script>
<script src="site_libs/quarto-html/popper.min.js"></script>
<script src="site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="site_libs/quarto-html/anchor.min.js"></script>
<link href="site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="site_libs/bootstrap/bootstrap.min.js"></script>
<link href="site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 50,
  "keyboard-shortcut": [
    "f",
    "/",
    "s"
  ],
  "show-item-context": false,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-text-placeholder": "",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>


<link rel="stylesheet" href="styles.css">
</head>

<body class="nav-sidebar docked nav-fixed">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
    <nav class="navbar navbar-expand-lg " data-bs-theme="dark">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container mx-auto">
    <a class="navbar-brand" href="./index.html">
    <span class="navbar-title">Getting Started With Data Analysis</span>
    </a>
  </div>
        <div class="quarto-navbar-tools tools-end">
</div>
          <div id="quarto-search" class="" title="Search"></div>
      </div> <!-- /container-fluid -->
    </nav>
  <nav class="quarto-secondary-nav">
    <div class="container-fluid d-flex">
      <button type="button" class="quarto-btn-toggle btn" data-bs-toggle="collapse" role="button" data-bs-target=".quarto-sidebar-collapse-item" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
        <i class="bi bi-layout-text-sidebar-reverse"></i>
      </button>
        <nav class="quarto-page-breadcrumbs" aria-label="breadcrumb"><ol class="breadcrumb"><li class="breadcrumb-item"><a href="./cleaning.html">Data Cleaning</a></li></ol></nav>
        <a class="flex-grow-1" role="navigation" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">      
        </a>
    </div>
  </nav>
  <div id="quarto-announcement" data-announcement-id="e3ec72ce1566099da595d98da1f61477" class="alert alert-primary hidden"><i class="bi bi-info-circle quarto-announcement-icon"></i><div class="quarto-announcement-content">
<p><strong>Note</strong> - Some of the code on this guide may be out of date. If you find an error, please let me know!</p>
</div><i class="bi bi-x-lg quarto-announcement-action"></i></div>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
  <nav id="quarto-sidebar" class="sidebar collapse collapse-horizontal quarto-sidebar-collapse-item sidebar-navigation docked overflow-auto">
    <div class="sidebar-menu-container"> 
    <ul class="list-unstyled mt-1">
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./index.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Overview</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./record_keeping.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Record Keeping</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./analysis_plan.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Analysis Plan</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./downloading.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Downloading from Qualtics</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./cleaning.html" class="sidebar-item-text sidebar-link active">
 <span class="menu-text">Data Cleaning</span></a>
  </div>
</li>
    </ul>
    </div>
</nav>
<div id="quarto-sidebar-glass" class="quarto-sidebar-collapse-item" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item"></div>
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">On this page</h2>
   
  <ul>
  <li><a href="#aka-getting-data-ready-for-analysis" id="toc-aka-getting-data-ready-for-analysis" class="nav-link active" data-scroll-target="#aka-getting-data-ready-for-analysis">AKA Getting Data ready for analysis</a></li>
  <li><a href="#rules-of-data-cleaning" id="toc-rules-of-data-cleaning" class="nav-link" data-scroll-target="#rules-of-data-cleaning">Rules of Data Cleaning</a></li>
  <li><a href="#common-data-cleaning-tasks" id="toc-common-data-cleaning-tasks" class="nav-link" data-scroll-target="#common-data-cleaning-tasks">Common Data Cleaning Tasks</a>
  <ul class="collapse">
  <li><a href="#getting-started-with-r" id="toc-getting-started-with-r" class="nav-link" data-scroll-target="#getting-started-with-r">Getting Started With R</a></li>
  <li><a href="#removing-irrelevant-data-e.g.-test-subjects-technical-errors-etc" id="toc-removing-irrelevant-data-e.g.-test-subjects-technical-errors-etc" class="nav-link" data-scroll-target="#removing-irrelevant-data-e.g.-test-subjects-technical-errors-etc">Removing irrelevant data (e.g.&nbsp;test subjects, technical errors etc)</a></li>
  <li><a href="#cleaning-up-your-labels" id="toc-cleaning-up-your-labels" class="nav-link" data-scroll-target="#cleaning-up-your-labels">Cleaning up your labels&nbsp;</a></li>
  <li><a href="#combining-surveys-by-participant-id-for-multi-part-studies" id="toc-combining-surveys-by-participant-id-for-multi-part-studies" class="nav-link" data-scroll-target="#combining-surveys-by-participant-id-for-multi-part-studies">Combining surveys by participant ID (for multi-part studies)</a></li>
  <li><a href="#exclusions" id="toc-exclusions" class="nav-link" data-scroll-target="#exclusions">Exclusions</a></li>
  <li><a href="#attention-checks" id="toc-attention-checks" class="nav-link" data-scroll-target="#attention-checks">Attention checks</a></li>
  <li><a href="#ensuring-responses-can-be-analyzed-appropriately" id="toc-ensuring-responses-can-be-analyzed-appropriately" class="nav-link" data-scroll-target="#ensuring-responses-can-be-analyzed-appropriately">Ensuring responses can be analyzed appropriately</a></li>
  <li><a href="#creating-aggregate-scores-for-specific-measures" id="toc-creating-aggregate-scores-for-specific-measures" class="nav-link" data-scroll-target="#creating-aggregate-scores-for-specific-measures">Creating aggregate scores (for specific measures)</a></li>
  <li><a href="#ongoing-cleaning" id="toc-ongoing-cleaning" class="nav-link" data-scroll-target="#ongoing-cleaning">Ongoing Cleaning</a></li>
  </ul></li>
  </ul>
</nav>
    <div class="quarto-margin-footer"><div class="margin-footer-item">
<p>Created by Deb Lindsay 2025.</p>
</div></div></div>
<!-- main -->
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">Cleaning Data</h1>
</div>



<div class="quarto-title-meta">

    
  
    
  </div>
  


</header>


<section id="aka-getting-data-ready-for-analysis" class="level2">
<h2 class="anchored" data-anchor-id="aka-getting-data-ready-for-analysis">AKA Getting Data ready for analysis</h2>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="images/data cleaning_labyrinth .jpeg" class="img-fluid quarto-figure quarto-figure-center figure-img" style="width:60.0%"></p>
</figure>
</div>
<p>I’m not going to lie to you here. Data cleaning is the <strong>BIGGEST</strong> step in data analysis. You literally cannot do anything until you get your data into a format that can be used. And this takes time.&nbsp;</p>
<p>You can clean your data in many ways using many programs. But however you do it, you always want to be able to&nbsp;</p>
<ol type="1">
<li><p>See your work, and</p></li>
<li><p>Go back to an earlier stage to check/edit any changes you’ve made</p></li>
</ol>
<p>This requires very good note taking, version control, and/or change tracking. (Remember what I wrote in Good Record Keeping? That is all very relevant now)</p>
<p>I prefer to do all my data cleaning in R because this allows me to do these things. Excel is easier, but it’s very easy to mess up your data and not know where you messed up. R is more difficult to get the hang of, but (if you do it right) you can clearly see what you have done every step of the way and mistakes are easy to find and change.&nbsp;</p>
<p>Here are my hard and fast rules on data cleaning…</p>
</section>
<section id="rules-of-data-cleaning" class="level2">
<h2 class="anchored" data-anchor-id="rules-of-data-cleaning">Rules of Data Cleaning</h2>
<ol type="1">
<li><p><strong>Never EVER edit the raw data set<br>
</strong>Yes you can always re-download your data from Qualtrics, but don’t rely on that being there. You want to have the purest version of your data always available. This allows you to share it with other researchers and allows you to always have the ability to go back to square one if things go sideways (which can happen during cleaning).<br>
</p></li>
<li><p><strong>Keep versions of all major changes to your data<br>
</strong>Think of this like re-spawn places. How much work do you want to have to re-do if you find a big issue and need to start over again? My go-to major changes are</p>
<ol type="1">
<li><p>Combining Pre and Post surveys</p></li>
<li><p>Restructuring from a long to wide data (This is a much more technical point that I’ll cover in another guide)</p></li>
<li><p>Adding new columns that aggregate new data points</p></li>
</ol>
<p>This will likely be different for every project, but it’s exceptionally helpful to have these versions (especially if you are working in Excel).<br>
</p></li>
<li><p><strong>Make notes of ALL changes</strong><br>
And I mean ALL the changes you make. My R cleaning files are fully annotated with notes about each change I make to the data and why I made those changes. I was once told that you should leave notes in your analysis documents that are good enough that someone else could look at your code and understand what is going on – and usually that “someone else” is you in 6 months time. I guarantee you that you will not remember what those changes were when you come back to your project after a couple of weeks of doing something else. And if you intend to go further in research (like grad school), you will definitely have data that you haven’t looked at for 2-3 years and will need those detailed notes. Make. Lots. Of. Notes.</p></li>
</ol>
<p>Okay, now we can get to the meat of the exercise. Every project will have specific data cleaning needs but there are a few that are common enough that I’m going to cover them here. These are as follows…</p>
</section>
<section id="common-data-cleaning-tasks" class="level2">
<h2 class="anchored" data-anchor-id="common-data-cleaning-tasks">Common Data Cleaning Tasks</h2>
<ol type="1">
<li><p><a href="#getting-started-with-r">Getting Started With R</a></p></li>
<li><p><a href="#removing-irrelevant-data-e.g.-test-subjects-technical-errors-etc">Removing irrelevant data (e.g.&nbsp;test subjects, technical errors etc)</a></p></li>
<li><p><a href="#">Cleaning up your labels</a></p></li>
<li><p><a href="#combining-surveys-by-participant-id-for-multi-part-studies">Combining surveys by participant ID (for multi-part studies)</a></p></li>
<li><p><a href="#exclusions">Exclusions</a>&nbsp;</p></li>
<li><p><a href="#attention-checks">Attention checks</a></p></li>
<li><p><a href="#ensuring-responses-can-be-analyzed-appropriately">Ensuring responses can be analyzed appropriately</a></p></li>
<li><p><a href="#creating-aggregate-scores-for-specific-measures">Creating aggregate scores (for specific measures)</a></p></li>
</ol>
<section id="getting-started-with-r" class="level3">
<h3 class="anchored" data-anchor-id="getting-started-with-r">Getting Started With R</h3>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="images/runcoderun.png" class="img-fluid quarto-figure quarto-figure-center figure-img" style="width:50.0%"></p>
</figure>
</div>
<section id="download-r-r-studio" class="level4">
<h4 class="anchored" data-anchor-id="download-r-r-studio">Download R &amp; R Studio</h4>
<p>You need both. R runs the code, R Studio is easier to work with than R alone.</p>
<section id="downloading-r" class="level5">
<h5 class="anchored" data-anchor-id="downloading-r"><strong>Downloading R</strong></h5>
<ul>
<li><p>Click on CRAN (under downloads) on the <a href="https://www.r-project.org/">R-project site</a></p></li>
<li><p>Use the first server to download - it’s called 0-Cloud</p></li>
<li><p>Select the R download for the system you are using (Windows, macOS, or Linux)</p></li>
<li><p>I typically recommend downloading the latest version, but check to make sure you are running the appropriate OS to handle it</p></li>
<li><p>Install based on your OS</p></li>
</ul>
</section>
<section id="downloading-r-studio" class="level5">
<h5 class="anchored" data-anchor-id="downloading-r-studio"><strong>Downloading R Studio</strong></h5>
<ul>
<li><p>Scroll down on the <a href="https://posit.co/download/rstudio-desktop/">R Studio site</a> until you see either a button for downloading for Mac, or a bunch of links for downloading for other OS’s</p></li>
<li><p>Install based on your OS</p></li>
</ul>
<p>You will code in R Studio. This program is basically an overlay for R that makes it more user-friendly.&nbsp;</p>
<hr>
</section>
</section>
<section id="extra-r-resources" class="level4">
<h4 class="anchored" data-anchor-id="extra-r-resources">Extra R Resources</h4>
<p>To begin with I’m going to recommend R for Data Science as a great resource for cleaning your data in R. This is what I used to learn a lot of R and the packages I use to clean are detailed by them (e.g.&nbsp;Tidyverse). I would recommend bookmarking this e-book for future reference.</p>
<p>-&gt; <a href="https://r4ds.had.co.nz/" class="uri">https://r4ds.had.co.nz/</a>&nbsp;</p>
<p>There’s also some really good courses on CodeAcademy and Coursera that cover basic R. It’s definitely helpful to start playing around with R now to get comfortable with the format.&nbsp;</p>
<p>Useful course links:</p>
<ul>
<li><p><a href="https://www.codecademy.com/catalog/language/r" class="uri">https://www.codecademy.com/catalog/language/r</a></p></li>
<li><p><a href="https://www.coursera.org/projects/getting-started-with-r" class="uri">https://www.coursera.org/projects/getting-started-with-r</a></p></li>
<li><p><a href="https://ldierker1.github.io/passiondrivenstatistics/" class="uri">https://ldierker1.github.io/passiondrivenstatistics/</a></p></li>
</ul>
<hr>
</section>
<section id="creating-a-project" class="level4">
<h4 class="anchored" data-anchor-id="creating-a-project">Creating a Project</h4>
<p>The first thing you need to do in R is create a project. I’m not going to reinvent the wheel here. The R Studio help site has everything you need to create a project. Check their instructions out here - <a href="https://support.rstudio.com/hc/en-us/articles/200526207-Using-RStudio-Projects" class="uri">https://support.rstudio.com/hc/en-us/articles/200526207-Using-RStudio-Projects</a></p>
</section>
<section id="setting-up-your-cleaning-file" class="level4">
<h4 class="anchored" data-anchor-id="setting-up-your-cleaning-file">Setting up Your Cleaning File</h4>
<p>Once you have created your project, set your cleaning script up as follows:</p>
<ol type="1">
<li><p>Create a new R Script File and give it a meaningful name related to “Cleaning”. You will use this one script to clean all your data. This makes it easier to clean new data for your project when it comes in (e.g.&nbsp;when you run future phases of data collection)<br>
</p></li>
<li><p>Make sure the Tidyverse package is installed first. Type the following code in your Cleaning Script:</p>
<div class="sourceCode" id="cb1"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="co">#this installs the packages </span></span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a><span class="fu">install.packages</span>(<span class="st">"tidyverse"</span>) </span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a><span class="fu">install.packages</span>(“lubridate”)</span>
<span id="cb1-4"><a href="#cb1-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-5"><a href="#cb1-5" aria-hidden="true" tabindex="-1"></a><span class="co">#this runs the package </span></span>
<span id="cb1-6"><a href="#cb1-6" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(tidyverse) </span>
<span id="cb1-7"><a href="#cb1-7" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(lubridate)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div></li>
</ol>
<!-- -->
<ol start="3" type="1">
<li>Make a note of when you downloaded the data. This will allow you to refer quickly to what data set you are analyzing. This is really important if you are running analyses before you have collected all the&nbsp; data. I like to make notes about whether I am still collecting data so I know where I’m at.</li>
</ol>
<div class="sourceCode" id="cb2"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a><span class="co">#Data downloaded from Qualtrics Thursday February 10 2022</span></span>
<span id="cb2-2"><a href="#cb2-2" aria-hidden="true" tabindex="-1"></a><span class="co">#Data collection is still ongoing for this project</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<ol start="4" type="1">
<li>Give a useful title and make any notes at the start of your cleaning document. Things to include might be:
<ul>
<li><p>This chunk of cleaning script is related to the Pre Survey/Post Survey</p></li>
<li><p>If you have made any changes in Excel before you imported into R</p></li>
<li><p>Anything weird you think you’ll need to remember in the future</p></li>
</ul></li>
</ol>
<div class="sourceCode" id="cb3"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a><span class="do">###################################################</span></span>
<span id="cb3-2"><a href="#cb3-2" aria-hidden="true" tabindex="-1"></a><span class="co">#Cleaning up the Pre-Survey</span></span>
<span id="cb3-3"><a href="#cb3-3" aria-hidden="true" tabindex="-1"></a><span class="co">#Two rows removed in Excel before I imported into R</span></span>
<span id="cb3-4"><a href="#cb3-4" aria-hidden="true" tabindex="-1"></a><span class="do">###################################################</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<ol start="5" type="1">
<li>Load data &amp; Save it to a data frame</li>
</ol>
<p>To do this you are going to give your data frame a useful name. You can name this whatever you want, but make sure it makes sense. For full instructions on importing data see <a href="https://r4ds.had.co.nz/data-import.html" class="uri">https://r4ds.had.co.nz/data-import.html</a>.</p>
<p>As a note, I save my R files in a very specific file structure:</p>
<ul>
<li><p>Project_name</p>
<ul>
<li><p>Script</p>
<ul>
<li><p>cleaning.r</p></li>
<li><p>prelim_analyses.r</p></li>
<li><p>hypothesis_testing.r</p></li>
</ul></li>
<li><p>Data</p>
<ul>
<li><p>project_pre_date.csv</p></li>
<li><p>project_post_date.csv</p></li>
</ul></li>
<li><p>Archive</p>
<ul>
<li>All old data and scripts not being currently used</li>
</ul></li>
</ul></li>
</ul>
<p>Because of this, I need to use the prefix ./Data/ before I call the csv I am importing. If you save your data directly into the same folder as your cleaning script you can just type out the csv inside the “ “</p>
<div class="sourceCode" id="cb4"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a>data <span class="ot">&lt;-</span> </span>
<span id="cb4-2"><a href="#cb4-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">read_csv</span>(<span class="st">"./Data/CS_P3_Pre_Feb102022csv.csv"</span>, <span class="at">na =</span> <span class="st">""</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>Once you load your data set, you can open it to see what it looks like. Either click on the data in the Environment window on the right, or type the following into your Console at the bottom of your screen: <code>View(data)</code></p>
<p>This will open a window of your data and is really helpful to give you a sense of what your data looks like:</p>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="images/r1.png" class="img-fluid quarto-figure quarto-figure-center figure-img"></p>
</figure>
</div>
<p>At the top there is the heading row which will automatically be the first row that R imported. This is why it is important to give your Qualtrics questions meaningful labels - so you can figure them out later on in R.</p>
<p>When you import from Qualtrics you will always get a spare row that describes what that column is. This is the text that is displayed in the question and you’ll want to delete it straight away as you don’t need it in R.</p>
<p>Then it will show you a row for each submission in Qualtrics.&nbsp;</p>
<p>Qualtrics also includes a bunch of unnecessary metadata at the start of your spreadsheet that you can get rid of. Some of this is useful (progress, recordedDate can sometimes be helpful) but ultimately we are going to delete these columns.&nbsp;</p>
<p>Now we can get started on actually cleaning…</p>
</section>
</section>
<section id="removing-irrelevant-data-e.g.-test-subjects-technical-errors-etc" class="level3">
<h3 class="anchored" data-anchor-id="removing-irrelevant-data-e.g.-test-subjects-technical-errors-etc">Removing irrelevant data (e.g.&nbsp;test subjects, technical errors etc)</h3>
<section id="remove-the-extra-rows-from-qualtrics" class="level4">
<h4 class="anchored" data-anchor-id="remove-the-extra-rows-from-qualtrics">Remove the extra row/s from Qualtrics&nbsp;</h4>
<p>As I said earlier, Qualtrics puts extra rows in your spreadsheet with more descriptive text about what is being imported. You can remove this in excel before you import into R - make sure to make a note of that in your R code so you know you’ve done this. Or you can remove it in R using this code:</p>
<div class="sourceCode" id="cb5"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a>data <span class="ot">&lt;-</span> </span>
<span id="cb5-2"><a href="#cb5-2" aria-hidden="true" tabindex="-1"></a>  data[<span class="sc">-</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">2</span>),] </span>
<span id="cb5-3"><a href="#cb5-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-4"><a href="#cb5-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Code Notes: # Using [ ] indexes the rows by row number </span></span>
<span id="cb5-5"><a href="#cb5-5" aria-hidden="true" tabindex="-1"></a><span class="co"># The - sign tells R to remove them (1:2) means everything between rows 1 and 2 </span></span>
<span id="cb5-6"><a href="#cb5-6" aria-hidden="true" tabindex="-1"></a><span class="co"># The , with nothing after it indicates that we don't care about columns</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</section>
<section id="removing-test-subjects" class="level4">
<h4 class="anchored" data-anchor-id="removing-test-subjects">Removing Test Subjects</h4>
<p>You are likely going to have a bunch of test data at the start of the sheet. If you know when your study actually went live you can remove test subjects using that date. Otherwise, you might need to look for other tells</p>
<ul>
<li><p>The word “test” in a specific field&nbsp;</p></li>
<li><p>Not including a proper unique ID (if your RA’s manually enter these - typical for in-lab studies)</p></li>
</ul>
<p>You can remove your test subjects in Excel before you import into R, but make sure you make a note of it when you import your data.</p>
<p>To remove them by date in R you need to do a bit of wrangling first. The first step is to make sure the startDate is read as an actual date. For more information about dates in the Tidyverse see - <a href="https://r4ds.had.co.nz/dates-and-times.html#dates-and-times" class="uri">https://r4ds.had.co.nz/dates-and-times.html#dates-and-times</a>&nbsp;</p>
<p>Remember to always start with a note of what you are doing</p>
<p>You can use the same data-frame name to save over here. (I typically do this until I’m making big data-frame changes)</p>
<p>Use filter() to find people who started after the survey went live.</p>
<p>For full instructions on using filter see - <a href="https://r4ds.had.co.nz/transform.html#filter-rows-with-filter" class="uri">https://r4ds.had.co.nz/transform.html#filter-rows-with-filter</a>&nbsp;</p>
<div class="sourceCode" id="cb6"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Remove test subjects - anything that was recorded before January 31 2022, 11.59am</span></span>
<span id="cb6-2"><a href="#cb6-2" aria-hidden="true" tabindex="-1"></a><span class="co"># Make sure Start Date is read as a date</span></span>
<span id="cb6-3"><a href="#cb6-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-4"><a href="#cb6-4" aria-hidden="true" tabindex="-1"></a>data <span class="ot">&lt;-</span></span>
<span id="cb6-5"><a href="#cb6-5" aria-hidden="true" tabindex="-1"></a>  data <span class="sc">%&gt;%</span> </span>
<span id="cb6-6"><a href="#cb6-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">StartDate =</span> <span class="fu">mdy_hm</span>(StartDate, <span class="at">tz =</span> <span class="st">"America/Los_Angeles"</span>))</span>
<span id="cb6-7"><a href="#cb6-7" aria-hidden="true" tabindex="-1"></a><span class="co"># Note: you need to call the package "lubridate" for this to work</span></span>
<span id="cb6-8"><a href="#cb6-8" aria-hidden="true" tabindex="-1"></a><span class="co"># It is also important to make sure the time zone is set to the right time so when you remove participants they will be in relation to the time YOU actually started the study (not their local time)</span></span>
<span id="cb6-9"><a href="#cb6-9" aria-hidden="true" tabindex="-1"></a><span class="co"># to see all the timezones that you might need use: OlsonNames()</span></span>
<span id="cb6-10"><a href="#cb6-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-11"><a href="#cb6-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-12"><a href="#cb6-12" aria-hidden="true" tabindex="-1"></a><span class="fu">str</span>(data<span class="sc">$</span>StartDate) <span class="co">#checking the structure of the date</span></span>
<span id="cb6-13"><a href="#cb6-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-14"><a href="#cb6-14" aria-hidden="true" tabindex="-1"></a><span class="co"># The StartDate variable will now show as POSIxct, which is the code R uses for a unicode data</span></span>
<span id="cb6-15"><a href="#cb6-15" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-16"><a href="#cb6-16" aria-hidden="true" tabindex="-1"></a><span class="sc">&gt;</span> <span class="fu">str</span>(data<span class="sc">$</span>StartDate)</span>
<span id="cb6-17"><a href="#cb6-17" aria-hidden="true" tabindex="-1"></a> POSIXct[<span class="dv">1</span><span class="sc">:</span><span class="dv">583</span>], format<span class="sc">:</span> <span class="st">"2022-11-08 14:30:10"</span> <span class="st">"2022-11-08 14:31:39"</span> <span class="st">"2022-11-08 14:37:51"</span> ...</span>
<span id="cb6-18"><a href="#cb6-18" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-19"><a href="#cb6-19" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-20"><a href="#cb6-20" aria-hidden="true" tabindex="-1"></a>data <span class="ot">&lt;-</span></span>
<span id="cb6-21"><a href="#cb6-21" aria-hidden="true" tabindex="-1"></a>  data <span class="sc">%&gt;%</span> </span>
<span id="cb6-22"><a href="#cb6-22" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(StartDate <span class="sc">&gt;</span> <span class="st">"2022-01-31 11:59:00 UTC"</span>)</span>
<span id="cb6-23"><a href="#cb6-23" aria-hidden="true" tabindex="-1"></a><span class="co"># Note: You'll need to place your date/time in " " for R to read it and make sure to end with UTC</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</section>
<section id="removing-technical-errors" class="level4">
<h4 class="anchored" data-anchor-id="removing-technical-errors">Removing Technical Errors</h4>
<p>You may also have technical errors that you know you have to remove. You should have a note document for your study that keeps track of any issues while the study is being run. If you need to remove participants because of technical issues while they completed the study you can remove them by their ID.&nbsp;</p>
<p>The actual label that is used for their ID will be different for each study, so make sure you know what you labeled it.</p>
<p>I use the Filter function to remove rows that have certain ID’s.&nbsp;</p>
<div class="sourceCode" id="cb7"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a><span class="co">#Remove subjects 3CS5643 and 1CS45793 because of problems with the laptop while running study</span></span>
<span id="cb7-2"><a href="#cb7-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-3"><a href="#cb7-3" aria-hidden="true" tabindex="-1"></a>data <span class="ot">&lt;-</span></span>
<span id="cb7-4"><a href="#cb7-4" aria-hidden="true" tabindex="-1"></a>    data <span class="sc">%&gt;%</span></span>
<span id="cb7-5"><a href="#cb7-5" aria-hidden="true" tabindex="-1"></a>    <span class="fu">filter</span>(unique_id <span class="sc">!=</span> <span class="st">"3CS5643"</span> <span class="sc">&amp;</span> unique_id <span class="sc">!=</span> <span class="st">"1CS45793"</span>)</span>
<span id="cb7-6"><a href="#cb7-6" aria-hidden="true" tabindex="-1"></a><span class="co"># Code notes:</span></span>
<span id="cb7-7"><a href="#cb7-7" aria-hidden="true" tabindex="-1"></a><span class="co">#       != means 'does not equal</span></span>
<span id="cb7-8"><a href="#cb7-8" aria-hidden="true" tabindex="-1"></a><span class="co">#       put the id's in " " because they will be character strings and they need " " for R to find them</span></span>
<span id="cb7-9"><a href="#cb7-9" aria-hidden="true" tabindex="-1"></a><span class="co">#       &amp; means AND, so R will remove rows that have the ID as 3CS5643 AND rows that have the ID as 1CS45793 </span></span>
<span id="cb7-10"><a href="#cb7-10" aria-hidden="true" tabindex="-1"></a><span class="co">#       make sure you specify the label unique_id again for each entry after an AND (&amp;) otherwise it won't work</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</section>
<section id="removing-unnecessary-columns" class="level4">
<h4 class="anchored" data-anchor-id="removing-unnecessary-columns">Removing Unnecessary Columns</h4>
<p>Qualtrics is also going to put a lot of columns in that you don’t need. Most of these are meta-data that you will never use so you can get rid of them to make viewing your sheet easier. It’s not necessary to remove them, but I have a rule of only keeping data that is relevant to my analysis.</p>
<p>You can delete these in Excel before you import - remember to make a note in R if you do this.</p>
<p>To remove in R, use the select() function to remove all the rows you don’t need. Placing a minus sign (-) in front of each variable will remove it.</p>
<p>I like to leave in&nbsp;</p>
<ul>
<li><p>progress</p></li>
<li><p>duration</p></li>
</ul>
<div class="sourceCode" id="cb8"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb8-1"><a href="#cb8-1" aria-hidden="true" tabindex="-1"></a>data <span class="ot">&lt;-</span></span>
<span id="cb8-2"><a href="#cb8-2" aria-hidden="true" tabindex="-1"></a>    data <span class="sc">%&gt;%</span>  </span>
<span id="cb8-3"><a href="#cb8-3" aria-hidden="true" tabindex="-1"></a>    <span class="fu">select</span>(<span class="sc">-</span>StartDate, </span>
<span id="cb8-4"><a href="#cb8-4" aria-hidden="true" tabindex="-1"></a>        <span class="sc">-</span>EndDate,</span>
<span id="cb8-5"><a href="#cb8-5" aria-hidden="true" tabindex="-1"></a>            <span class="sc">-</span>Status, </span>
<span id="cb8-6"><a href="#cb8-6" aria-hidden="true" tabindex="-1"></a>            .... ) </span>
<span id="cb8-7"><a href="#cb8-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb8-8"><a href="#cb8-8" aria-hidden="true" tabindex="-1"></a><span class="co"># Coding notes:</span></span>
<span id="cb8-9"><a href="#cb8-9" aria-hidden="true" tabindex="-1"></a><span class="co"># Select allows us to select certain columns, </span></span>
<span id="cb8-10"><a href="#cb8-10" aria-hidden="true" tabindex="-1"></a><span class="co"># Adding a - sign removes them</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</section>
</section>
<section id="cleaning-up-your-labels" class="level3">
<h3 class="anchored" data-anchor-id="cleaning-up-your-labels">Cleaning up your labels&nbsp;</h3>
<p>If you haven’t labelled your items sensibly in Qualtrics before you start you may have to do some editing now so you can understand your data. You can also do this in Excel, but remember to make a note of this when you import your data into R.</p>
<p>To see all the variable names in your spreadsheet easily use this code: <code>variable.names(data)</code></p>
<p>All the names will then print in the Console at the bottom of your R screen:</p>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="images/r2.png" class="img-fluid quarto-figure quarto-figure-center figure-img"></p>
</figure>
</div>
<p>I’ve labelled my items based on what measure they are:</p>
<ul>
<li><p>WB = Ryff Well-being Scale</p></li>
<li><p>CES_D = Depression Inventory</p></li>
<li><p>Att = Attention check items</p></li>
</ul>
<p>If you need to change any variable names use the following:</p>
<div class="sourceCode" id="cb9"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb9-1"><a href="#cb9-1" aria-hidden="true" tabindex="-1"></a><span class="co">#Rename duration column</span></span>
<span id="cb9-2"><a href="#cb9-2" aria-hidden="true" tabindex="-1"></a>data <span class="ot">&lt;-</span></span>
<span id="cb9-3"><a href="#cb9-3" aria-hidden="true" tabindex="-1"></a>  data <span class="sc">%&gt;%</span> </span>
<span id="cb9-4"><a href="#cb9-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">rename</span>(<span class="at">duration =</span> <span class="st">`</span><span class="at">Duration (in seconds)</span><span class="st">`</span>)</span>
<span id="cb9-5"><a href="#cb9-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-6"><a href="#cb9-6" aria-hidden="true" tabindex="-1"></a><span class="co"># Code Notes:</span></span>
<span id="cb9-7"><a href="#cb9-7" aria-hidden="true" tabindex="-1"></a><span class="co"># rename is in the same package as select()</span></span>
<span id="cb9-8"><a href="#cb9-8" aria-hidden="true" tabindex="-1"></a><span class="co"># It functions as... rename(new_name = old_name)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</section>
<section id="combining-surveys-by-participant-id-for-multi-part-studies" class="level3">
<h3 class="anchored" data-anchor-id="combining-surveys-by-participant-id-for-multi-part-studies">Combining surveys by participant ID (for multi-part studies)</h3>
<p>If you have multi-part studies then you will need to combine the separate spreadsheets together so you can analyze them as one spreadsheet.&nbsp;</p>
<p>This is done by having a unique ID for each participant that they enter for each survey so you can match them across surveys.</p>
<p>You will want to tidy up each spreadsheet before you combine them together. So, make sure you go through the steps above for each spreadsheet before you get to this step.</p>
<p>There are some important things to note when you merge spreadsheets</p>
<ol type="1">
<li><p>Make sure there is a participant ID on each data frame</p></li>
<li><p>Make sure the label/variable name for participant ID is the same on each data frame</p></li>
</ol>
<p>The code you will need to this is:</p>
<div class="sourceCode" id="cb10"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb10-1"><a href="#cb10-1" aria-hidden="true" tabindex="-1"></a><span class="co">#create a new dataframe for all the data</span></span>
<span id="cb10-2"><a href="#cb10-2" aria-hidden="true" tabindex="-1"></a>data_all <span class="ot">&lt;-</span></span>
<span id="cb10-3"><a href="#cb10-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">full_join</span>(data_pre, data_post, <span class="at">by=</span> <span class="st">"id"</span>, <span class="at">copy =</span> <span class="cn">TRUE</span>, <span class="at">suffix =</span> <span class="fu">c</span>(<span class="st">"_pre"</span>, <span class="st">"_post"</span>))</span>
<span id="cb10-4"><a href="#cb10-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb10-5"><a href="#cb10-5" aria-hidden="true" tabindex="-1"></a><span class="co"># Code Notes:</span></span>
<span id="cb10-6"><a href="#cb10-6" aria-hidden="true" tabindex="-1"></a><span class="co"># I use full_join() because I want to keep everything from both data frames</span></span>
<span id="cb10-7"><a href="#cb10-7" aria-hidden="true" tabindex="-1"></a><span class="co"># The first two terms are the two dataframes that you are merging</span></span>
<span id="cb10-8"><a href="#cb10-8" aria-hidden="true" tabindex="-1"></a><span class="co"># by = tells R what column you are using as the key to merge across the frames</span></span>
<span id="cb10-9"><a href="#cb10-9" aria-hidden="true" tabindex="-1"></a><span class="co"># I use "copy = TRUE" because I want duplicates of my variables </span></span>
<span id="cb10-10"><a href="#cb10-10" aria-hidden="true" tabindex="-1"></a><span class="co"># And R will append the suffixes _pre and _post to the duplicates it finds </span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>There are several ways to merge data frames together. See this section of R for Data Science for a good overview - <a href="https://r4ds.had.co.nz/relational-data.html#relational-data" class="uri">https://r4ds.had.co.nz/relational-data.html#relational-data</a></p>
<p>If you have more data frames to join you can pipe them on to the code as follows:</p>
<div class="sourceCode" id="cb11"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb11-1"><a href="#cb11-1" aria-hidden="true" tabindex="-1"></a><span class="co">#create a new dataframe for all the data</span></span>
<span id="cb11-2"><a href="#cb11-2" aria-hidden="true" tabindex="-1"></a>data_all <span class="ot">&lt;-</span></span>
<span id="cb11-3"><a href="#cb11-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">full_join</span>(data_pre, data_post, <span class="at">by=</span> <span class="st">"id"</span>, <span class="at">copy =</span> <span class="cn">TRUE</span>, <span class="at">suffix =</span> <span class="fu">c</span>(<span class="st">"_pre"</span>, <span class="st">"_post"</span>)) <span class="sc">%&gt;%</span> </span>
<span id="cb11-4"><a href="#cb11-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">full_join</span>(data_day1, <span class="at">by =</span> <span class="st">"id"</span>, <span class="at">copy =</span> <span class="cn">TRUE</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb11-5"><a href="#cb11-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">full_join</span>(data_day2, <span class="at">by =</span> <span class="st">"id"</span>, <span class="at">copy =</span> <span class="cn">TRUE</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb11-6"><a href="#cb11-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">full_join</span>(data_day3, <span class="at">by =</span> <span class="st">"id"</span>, <span class="at">copy =</span> <span class="cn">TRUE</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb11-7"><a href="#cb11-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">full_join</span>(data_day4, <span class="at">by =</span> <span class="st">"id"</span>, <span class="at">copy =</span> <span class="cn">TRUE</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb11-8"><a href="#cb11-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">full_join</span>(data_day5, <span class="at">by =</span> <span class="st">"id"</span>, <span class="at">copy =</span> <span class="cn">TRUE</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb11-9"><a href="#cb11-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">full_join</span>(data_day6, <span class="at">by =</span> <span class="st">"id"</span>, <span class="at">copy =</span> <span class="cn">TRUE</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb11-10"><a href="#cb11-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">full_join</span>(data_day7, <span class="at">by =</span> <span class="st">"id"</span>, <span class="at">copy =</span> <span class="cn">TRUE</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>And now you should have one giant data frame that has a row for each of your participants’ responses across all surveys!</p>
<p>Now is a good time to take a look at the data and see if you notice anything weird:</p>
<ul>
<li><p>Unusual id’s that don’t fit the pattern you created</p></li>
<li><p>An entire row of missing data</p></li>
<li><p>Extraordinarily long progress times</p></li>
</ul>
<p>There may be some things you need to clean up and address at this stage, but everything we’ve covered should help you with that. If you are still lost on how to fix your problem, reach out to whoever is mentoring you.</p>
</section>
<section id="exclusions" class="level3">
<h3 class="anchored" data-anchor-id="exclusions">Exclusions</h3>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="images/exclusions.png" class="img-fluid quarto-figure quarto-figure-center figure-img" style="width:50.0%"></p>
</figure>
</div>
<p>Participants will need to be excluded from your study. You will have made some a priori decisions about your exclusion criteria and that is what you will follow in this section. Common exclusions are:</p>
<ul>
<li><p>Attrition - removing those who didn’t complete the whole study</p></li>
<li><p>Heard about the details of the study</p></li>
<li><p>Figured out the deception being used</p></li>
</ul>
<section id="attrition" class="level4">
<h4 class="anchored" data-anchor-id="attrition">Attrition</h4>
<p>Each study will have different rules for removing participants who did not complete the whole study. If you have one survey you might only include people who have 100% progress. If you have multiple parts to your study, you might exclude participants who do not return for part 2. Check with the exclusion rules for your study and remove participants who meet the attrition exclusion requirements.</p>
<p>Qualtrics provides a progress variable that is useful at filtering participants at this stage.&nbsp;</p>
<p>Use the filter() function to remove participants where their progress does not equal 100.</p>
<div class="sourceCode" id="cb12"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb12-1"><a href="#cb12-1" aria-hidden="true" tabindex="-1"></a><span class="co"># remove participants who did not complete all of the Pre survey</span></span>
<span id="cb12-2"><a href="#cb12-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-3"><a href="#cb12-3" aria-hidden="true" tabindex="-1"></a>data_clean <span class="ot">&lt;-</span></span>
<span id="cb12-4"><a href="#cb12-4" aria-hidden="true" tabindex="-1"></a>  data_all <span class="sc">%&gt;%</span> </span>
<span id="cb12-5"><a href="#cb12-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(Progress_pre <span class="sc">==</span> <span class="dv">100</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>Be sure to keep a record of where people dropped out of the study. If you have multiple surveys that they need to complete (e.g.&nbsp;daily logging surveys for an intervention) you can count the number of participants who completed each day with the following:</p>
<div class="sourceCode" id="cb13"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb13-1"><a href="#cb13-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Count where participants dropped off during the weekly intervention</span></span>
<span id="cb13-2"><a href="#cb13-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-3"><a href="#cb13-3" aria-hidden="true" tabindex="-1"></a><span class="co">#day 1</span></span>
<span id="cb13-4"><a href="#cb13-4" aria-hidden="true" tabindex="-1"></a>data_clean <span class="sc">%&gt;%</span> </span>
<span id="cb13-5"><a href="#cb13-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(<span class="sc">!</span><span class="fu">is.na</span>(Progress_1)) <span class="sc">%&gt;%</span> </span>
<span id="cb13-6"><a href="#cb13-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">nrow</span>()</span>
<span id="cb13-7"><a href="#cb13-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-8"><a href="#cb13-8" aria-hidden="true" tabindex="-1"></a><span class="co">#day 2</span></span>
<span id="cb13-9"><a href="#cb13-9" aria-hidden="true" tabindex="-1"></a>data_clean <span class="sc">%&gt;%</span> </span>
<span id="cb13-10"><a href="#cb13-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(<span class="sc">!</span><span class="fu">is.na</span>(Progress_2)) <span class="sc">%&gt;%</span> </span>
<span id="cb13-11"><a href="#cb13-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">nrow</span>()</span>
<span id="cb13-12"><a href="#cb13-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-13"><a href="#cb13-13" aria-hidden="true" tabindex="-1"></a><span class="co">#day 3</span></span>
<span id="cb13-14"><a href="#cb13-14" aria-hidden="true" tabindex="-1"></a>data_clean <span class="sc">%&gt;%</span> </span>
<span id="cb13-15"><a href="#cb13-15" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(<span class="sc">!</span><span class="fu">is.na</span>(Progress_3)) <span class="sc">%&gt;%</span> </span>
<span id="cb13-16"><a href="#cb13-16" aria-hidden="true" tabindex="-1"></a>  <span class="fu">nrow</span>()</span>
<span id="cb13-17"><a href="#cb13-17" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-18"><a href="#cb13-18" aria-hidden="true" tabindex="-1"></a><span class="co">#day 4</span></span>
<span id="cb13-19"><a href="#cb13-19" aria-hidden="true" tabindex="-1"></a>data_clean <span class="sc">%&gt;%</span> </span>
<span id="cb13-20"><a href="#cb13-20" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(<span class="sc">!</span><span class="fu">is.na</span>(Progress_4)) <span class="sc">%&gt;%</span> </span>
<span id="cb13-21"><a href="#cb13-21" aria-hidden="true" tabindex="-1"></a>  <span class="fu">nrow</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>This gives you counts of each day:</p>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="images/r3.png" class="img-fluid quarto-figure quarto-figure-center figure-img"></p>
</figure>
</div>
</section>
<section id="heard-about-the-details-of-the-study" class="level4">
<h4 class="anchored" data-anchor-id="heard-about-the-details-of-the-study">Heard about the details of the study</h4>
<p>If you have a question that asks if the participant heard about the details of the study then you can use this to filter them out.</p>
<p>You may need to double check in Qualtrics what each number relates to (e.g., 1 = Yes; 2 = No)</p>
<div class="sourceCode" id="cb14"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb14-1"><a href="#cb14-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Remove participants who said they heard about the details of the study</span></span>
<span id="cb14-2"><a href="#cb14-2" aria-hidden="true" tabindex="-1"></a><span class="co"># 1 = Yes; 2 = No </span></span>
<span id="cb14-3"><a href="#cb14-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb14-4"><a href="#cb14-4" aria-hidden="true" tabindex="-1"></a>data_clean <span class="ot">&lt;-</span></span>
<span id="cb14-5"><a href="#cb14-5" aria-hidden="true" tabindex="-1"></a>  data_clean <span class="sc">%&gt;%</span> </span>
<span id="cb14-6"><a href="#cb14-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(hear_about_post <span class="sc">==</span> <span class="dv">2</span>) <span class="co">#only include those who said they didn't hear (2)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>Make a note of how many participants you remove at this stage</p>
</section>
<section id="figured-out-deception" class="level4">
<h4 class="anchored" data-anchor-id="figured-out-deception">Figured out deception</h4>
<p>If you have deception in your study you may have decided to remove participants who correctly guessed the purpose of the study.</p>
<p>You will need to read through the free responses and decide if anyone has to be removed. This is often easier in Excel.</p>
<p>Then remove them based on their ID.</p>
<div class="sourceCode" id="cb15"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb15-1"><a href="#cb15-1" aria-hidden="true" tabindex="-1"></a><span class="co"># remove participants ID 2CS45673 because they guessed the purpose of the study</span></span>
<span id="cb15-2"><a href="#cb15-2" aria-hidden="true" tabindex="-1"></a>data_clean <span class="ot">&lt;-</span></span>
<span id="cb15-3"><a href="#cb15-3" aria-hidden="true" tabindex="-1"></a>  data_clean <span class="sc">%&gt;%</span> </span>
<span id="cb15-4"><a href="#cb15-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(id <span class="sc">!=</span> <span class="st">"2CS45673"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</section>
</section>
<section id="attention-checks" class="level3">
<h3 class="anchored" data-anchor-id="attention-checks">Attention checks</h3>
<p>Our lab uses a standard set of attention and integrity checks to ensure the integrity of our self-report data. As part of your exclusion criteria you will have made some a priori decisions on who to include in your study. Use these as your rules when filtering out participants.</p>
<p>There’s a few steps in dealing with your attention checks.&nbsp;</p>
<ul>
<li><p>First you’ll need to combine them to make an overall proportion score of how each participant did. This is because you’ve probably got an exclusion rule based on how many checks a participant can miss.&nbsp;</p></li>
<li><p>You may also need to account for different attention check questions appearing in different conditions. You don’t want to exclude a participant for missing an attention check that wasn’t even shown to them because they weren’t in that condition.&nbsp;</p></li>
<li><p>If you have an intervention or exercise that requires sustained attention on a video, audio file, or activity outside of a survey, you will need to separate out these integrity questions from the attention checks.</p></li>
<li><p>Finally, you may have to retain some people in an intent-to-treat dataset. This allows for checking if simply being in a study (but not really paying attention to it) led to any improvements.</p></li>
</ul>
<section id="combining-attention-checks" class="level4">
<h4 class="anchored" data-anchor-id="combining-attention-checks">Combining Attention Checks</h4>
<p>I always start by making a note of all the attention checks and integrity questions that were included in the study and what the a priori decision was regarding exclusions.</p>
<div class="sourceCode" id="cb16"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb16-1"><a href="#cb16-1" aria-hidden="true" tabindex="-1"></a><span class="co">#objective attention checks</span></span>
<span id="cb16-2"><a href="#cb16-2" aria-hidden="true" tabindex="-1"></a><span class="co">#   all participants</span></span>
<span id="cb16-3"><a href="#cb16-3" aria-hidden="true" tabindex="-1"></a><span class="co">#       att_1_pre -&gt; correct response == 6</span></span>
<span id="cb16-4"><a href="#cb16-4" aria-hidden="true" tabindex="-1"></a><span class="co">#       att_2_pre -&gt; correct response == 1</span></span>
<span id="cb16-5"><a href="#cb16-5" aria-hidden="true" tabindex="-1"></a><span class="co">#       att_1_post -&gt; correct response == 2</span></span>
<span id="cb16-6"><a href="#cb16-6" aria-hidden="true" tabindex="-1"></a><span class="co">#       att_2_post -&gt; correct response == 2</span></span>
<span id="cb16-7"><a href="#cb16-7" aria-hidden="true" tabindex="-1"></a><span class="co">#   strength conditions only</span></span>
<span id="cb16-8"><a href="#cb16-8" aria-hidden="true" tabindex="-1"></a><span class="co">#       att_3_pre -&gt; correct response == 3</span></span>
<span id="cb16-9"><a href="#cb16-9" aria-hidden="true" tabindex="-1"></a><span class="co">#       att_4_pre -&gt; correct response == 2</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>I now use the ifelse() function to allocate a 0 or a 1 to a participant if they failed or passed the attention check. I use this with the Mutate() function to save this number over their responses.</p>
<p>Ifelse works like this:</p>
<div class="sourceCode" id="cb17"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb17-1"><a href="#cb17-1" aria-hidden="true" tabindex="-1"></a><span class="fu">Ifelse</span> (variable_name [does not equal] value, <span class="cf">if</span> true then place this value, <span class="cf">if</span> false then place this value)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>For example:&nbsp;</p>
<pre><code>Ifelse(att_1_pre != 6, 0, 1)</code></pre>
<p>If the value in <strong>att_1_pre</strong> does not equal <strong>6</strong> then put a <strong>0</strong> (because they failed the attention check), if it does equal 6 then put a <strong>1</strong></p>
<p>The example of code below also includes if else conditions for the total attention score which is what you will use if you have different conditions with different attention checks visible. It’s the same logic as above:</p>
<div class="sourceCode" id="cb19"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb19-1"><a href="#cb19-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ifelse</span>(condition <span class="sc">==</span> “top” <span class="sc">|</span> condition <span class="sc">==</span> “bottom”, (att_1_pre <span class="sc">+</span> att_2_pre <span class="sc">+</span> att_1_post <span class="sc">+</span> att_2_post <span class="sc">+</span> att_3_pre <span class="sc">+</span> att_4_pre), (att_1_pre <span class="sc">+</span> att_2_pre <span class="sc">+</span> att_1_post <span class="sc">+</span> att_2_post)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>If the <strong>condition</strong> equals <strong>top OR bottom</strong>, then add up these variables (because these are the attention checks those participants saw. If the condition is not one of those two, then just add up these variables (because they only saw those checks)</p>
<p>Then I mutate a final variable that calculates a proportion (from 0-1) so I can easily see how many attention checks were passed</p>
<div class="sourceCode" id="cb20"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb20-1"><a href="#cb20-1" aria-hidden="true" tabindex="-1"></a><span class="co">#create a total attention check percentage </span></span>
<span id="cb20-2"><a href="#cb20-2" aria-hidden="true" tabindex="-1"></a><span class="co"># 0 = failed, 1 = passed</span></span>
<span id="cb20-3"><a href="#cb20-3" aria-hidden="true" tabindex="-1"></a>data_clean <span class="ot">&lt;-</span></span>
<span id="cb20-4"><a href="#cb20-4" aria-hidden="true" tabindex="-1"></a>  data_clean <span class="sc">%&gt;%</span> </span>
<span id="cb20-5"><a href="#cb20-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">att_1_pre =</span> <span class="fu">ifelse</span>(att_1_pre <span class="sc">!=</span> <span class="dv">6</span>, <span class="dv">0</span>, <span class="dv">1</span>),</span>
<span id="cb20-6"><a href="#cb20-6" aria-hidden="true" tabindex="-1"></a>         <span class="at">att_2_pre =</span> <span class="fu">ifelse</span>(att_2_pre <span class="sc">!=</span> <span class="dv">1</span>, <span class="dv">0</span>, <span class="dv">1</span>),</span>
<span id="cb20-7"><a href="#cb20-7" aria-hidden="true" tabindex="-1"></a>         <span class="at">att_1_post =</span> <span class="fu">ifelse</span>(att_1_post <span class="sc">!=</span> <span class="dv">2</span>, <span class="dv">0</span>, <span class="dv">1</span>),</span>
<span id="cb20-8"><a href="#cb20-8" aria-hidden="true" tabindex="-1"></a>         <span class="at">att_2_post =</span> <span class="fu">ifelse</span>(att_2_post <span class="sc">!=</span> <span class="dv">2</span>, <span class="dv">0</span>, <span class="dv">1</span>),</span>
<span id="cb20-9"><a href="#cb20-9" aria-hidden="true" tabindex="-1"></a>         <span class="at">att_3_pre =</span> <span class="fu">ifelse</span>(att_3_pre <span class="sc">!=</span> <span class="dv">3</span>, <span class="dv">0</span>, <span class="dv">1</span>),</span>
<span id="cb20-10"><a href="#cb20-10" aria-hidden="true" tabindex="-1"></a>         <span class="at">att_4_pre =</span> <span class="fu">ifelse</span>(att_4_pre <span class="sc">!=</span> <span class="dv">2</span>, <span class="dv">0</span>, <span class="dv">1</span>),</span>
<span id="cb20-11"><a href="#cb20-11" aria-hidden="true" tabindex="-1"></a>         <span class="at">att_total =</span> <span class="fu">ifelse</span>(condition_pre <span class="sc">==</span> <span class="st">"top"</span> <span class="sc">|</span> </span>
<span id="cb20-12"><a href="#cb20-12" aria-hidden="true" tabindex="-1"></a>                              condition_pre <span class="sc">==</span> <span class="st">"bottom"</span>, </span>
<span id="cb20-13"><a href="#cb20-13" aria-hidden="true" tabindex="-1"></a>                            (att_1_pre <span class="sc">+</span> att_2_pre <span class="sc">+</span> att_1_post <span class="sc">+</span> att_2_post <span class="sc">+</span> att_3_pre <span class="sc">+</span> att_4_pre), </span>
<span id="cb20-14"><a href="#cb20-14" aria-hidden="true" tabindex="-1"></a>                            (att_1_pre <span class="sc">+</span> att_2_pre <span class="sc">+</span> att_1_post <span class="sc">+</span> att_2_post)),</span>
<span id="cb20-15"><a href="#cb20-15" aria-hidden="true" tabindex="-1"></a>         <span class="at">att_pc =</span> <span class="fu">ifelse</span>(condition_pre <span class="sc">==</span> <span class="st">"top"</span> <span class="sc">|</span> </span>
<span id="cb20-16"><a href="#cb20-16" aria-hidden="true" tabindex="-1"></a>                           condition_pre <span class="sc">==</span> <span class="st">"bottom"</span>, </span>
<span id="cb20-17"><a href="#cb20-17" aria-hidden="true" tabindex="-1"></a>                         <span class="fu">round</span>((att_total <span class="sc">/</span> <span class="dv">6</span>), <span class="dv">2</span>),</span>
<span id="cb20-18"><a href="#cb20-18" aria-hidden="true" tabindex="-1"></a>                         <span class="fu">round</span>((att_total <span class="sc">/</span> <span class="dv">4</span>),<span class="dv">2</span>)</span>
<span id="cb20-19"><a href="#cb20-19" aria-hidden="true" tabindex="-1"></a>         )) </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>If you have multiple study parts you may also need to do the same aggregation with the subjective attention check.</p>
</section>
<section id="filter-out-failed-attention-checks" class="level4">
<h4 class="anchored" data-anchor-id="filter-out-failed-attention-checks">Filter out Failed Attention Checks</h4>
<p>Now you can filter out the participants who do not meet your criteria. Remember to make a note of what this is in your R file. And I always do another count so I can keep track of how many participants were dropped because of failing attention checks</p>
<div class="sourceCode" id="cb21"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb21-1"><a href="#cb21-1" aria-hidden="true" tabindex="-1"></a><span class="co">#Keep participants who:</span></span>
<span id="cb21-2"><a href="#cb21-2" aria-hidden="true" tabindex="-1"></a><span class="co">#     have .75 or more on att_pc</span></span>
<span id="cb21-3"><a href="#cb21-3" aria-hidden="true" tabindex="-1"></a><span class="co">#     AND have exactly 1 on sub_att_prop</span></span>
<span id="cb21-4"><a href="#cb21-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-5"><a href="#cb21-5" aria-hidden="true" tabindex="-1"></a>data_clean <span class="ot">&lt;-</span></span>
<span id="cb21-6"><a href="#cb21-6" aria-hidden="true" tabindex="-1"></a>  data_clean <span class="sc">%&gt;%</span> </span>
<span id="cb21-7"><a href="#cb21-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(att_pc <span class="sc">&gt;=</span> .<span class="dv">75</span> <span class="sc">&amp;</span> sub_att_prop <span class="sc">==</span> <span class="dv">1</span>)</span>
<span id="cb21-8"><a href="#cb21-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-9"><a href="#cb21-9" aria-hidden="true" tabindex="-1"></a><span class="co">#count participants for records</span></span>
<span id="cb21-10"><a href="#cb21-10" aria-hidden="true" tabindex="-1"></a><span class="fu">nrow</span>(data_clean)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</section>
<section id="intent-to-treat-intervention-studies" class="level4">
<h4 class="anchored" data-anchor-id="intent-to-treat-intervention-studies">Intent to Treat (Intervention Studies)</h4>
<p>If you have an intervention in your study and asked the question about how much people engaged during this activity then you will also need to create a new variable that you can use to run intent to treat analyses.</p>
<div class="sourceCode" id="cb22"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb22-1"><a href="#cb22-1" aria-hidden="true" tabindex="-1"></a><span class="co">#create intent to treat item - 1 included in main analysis, 0 included in intent to treat analysis</span></span>
<span id="cb22-2"><a href="#cb22-2" aria-hidden="true" tabindex="-1"></a><span class="co">#integrity check (all participants)</span></span>
<span id="cb22-3"><a href="#cb22-3" aria-hidden="true" tabindex="-1"></a><span class="co">#   integrity (keep 1 and 2)</span></span>
<span id="cb22-4"><a href="#cb22-4" aria-hidden="true" tabindex="-1"></a>data_clean <span class="ot">&lt;-</span></span>
<span id="cb22-5"><a href="#cb22-5" aria-hidden="true" tabindex="-1"></a>  data_clean <span class="sc">%&gt;%</span> </span>
<span id="cb22-6"><a href="#cb22-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">intent_treat =</span> <span class="fu">ifelse</span>(integrity <span class="sc">==</span> <span class="dv">1</span> <span class="sc">|</span> integrity <span class="sc">==</span> <span class="dv">2</span>, <span class="dv">1</span>, <span class="dv">0</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</section>
</section>
<section id="ensuring-responses-can-be-analyzed-appropriately" class="level3">
<h3 class="anchored" data-anchor-id="ensuring-responses-can-be-analyzed-appropriately">Ensuring responses can be analyzed appropriately</h3>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="images/numeric_values.jpeg" class="img-fluid quarto-figure quarto-figure-center figure-img"></p>
</figure>
</div>
<p>When you started your project you should have created a spreadsheet of all the variables and what you plan to use them for in your analysis - see example here. Using this spreadsheet you should check all your variables to make sure they are recorded as the correct type (e.g.&nbsp;numeric, factor, character)</p>
<p>The main types of variables you will be using are:</p>
<ul>
<li><p><strong>Numeric</strong> values&nbsp;</p>
<ul>
<li><p>Any number value (including scores on a Likert scale) that you will use for regressions, correlations, factor analyses etc</p></li>
<li><p>Continuous variables needs to be recorded as numeric</p></li>
<li><p>In R this is noted as double (dbl)</p></li>
</ul></li>
<li><p><strong>Factor</strong> values</p>
<ul>
<li><p>Used for categorical variables</p></li>
<li><p>Have a specific label for each level of the variables</p>
<ul>
<li>E.g. Gender factors = male, female, non-binary, no_response</li>
</ul></li>
<li><p>These can be dummy-coded as numbers but make sure you note what each number relates to</p>
<ul>
<li>E.g. Gender factors = male (0), female (1), non-binary (2), no_response (3)</li>
</ul></li>
</ul></li>
<li><p><strong>Character</strong> values</p>
<ul>
<li><p>&nbsp;Used for open-ended text responses</p>
<ul>
<li>E.g. Feedback on survey</li>
</ul></li>
<li><p>These are typically manually coded outside of R</p></li>
</ul></li>
</ul>
<p>In order to run analyses, your data need to make sense. There are a few common annoyances that will break your code so fast, or worse… won’t break your code, but your results will make no sense.</p>
<p>A couple that I run across a lot are:</p>
<ol type="1">
<li><p>Numbers on a Likert scale that are saved as characters, so R can’t run any continuous analyses on them</p></li>
<li><p>Categorical variables that are coded as character strings and need to be re-coded as factors so R can run categorical analyses on them</p></li>
<li><p>A scale that has been re-coded by <strong><em>Qualtrics Gremlins</em></strong> so it no longer makes any reasonable sense (e.g.&nbsp;it should be 1(do not agree), 2, 3, 4, 5, 6, 7(do agree), but it’s now 10(do not agree), 2, 5, 6, 7, 1, 50(do agree)</p></li>
</ol>
<p>Using your variable spreadsheet, systematically check that each variable is being read in R as the right type of variable.&nbsp;</p>
<p>There are several ways you can check this. For a long list of items I like to use the select() function. Here I’m checking on the structure of the 18 responses for the Well-being scale:</p>
<div class="sourceCode" id="cb23"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb23-1"><a href="#cb23-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Checking on the structure of the well-being items</span></span>
<span id="cb23-2"><a href="#cb23-2" aria-hidden="true" tabindex="-1"></a>data_clean <span class="sc">%&gt;%</span> </span>
<span id="cb23-3"><a href="#cb23-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(WB_1_1_pre<span class="sc">:</span>WB_2_9_pre, WB_1_1_post<span class="sc">:</span>WB_2_9_post)</span>
<span id="cb23-4"><a href="#cb23-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-5"><a href="#cb23-5" aria-hidden="true" tabindex="-1"></a><span class="co"># Code notes:</span></span>
<span id="cb23-6"><a href="#cb23-6" aria-hidden="true" tabindex="-1"></a><span class="co"># use : to indicate you want to select all the columns between these two variables</span></span>
<span id="cb23-7"><a href="#cb23-7" aria-hidden="true" tabindex="-1"></a><span class="co"># use , to make another selection</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>This prints out as:</p>
<table class="caption-top table">
<colgroup>
<col style="width: 100%">
</colgroup>
<tbody>
<tr class="odd">
<td>&gt; data_clean %&gt;%<br>
+ &nbsp; select(WB_1_1_pre:WB_2_9_pre, WB_1_1_post:WB_2_9_post)<br>
# A tibble: 6 × 38<br>
&nbsp; WB_1_1_pre WB_1_2_pre WB_1_3_pre WB_1_4_pre WB_1_5_pre WB_1_6_pre WB_1_7_pre WB_1_8_pre WB_1_9_pre WB_2_1_pre<br>
&nbsp; &lt;chr&gt;&nbsp; &nbsp; &nbsp; &lt;chr&gt;&nbsp; &nbsp; &nbsp; &lt;chr&gt;&nbsp; &nbsp; &nbsp; &lt;chr&gt;&nbsp; &nbsp; &nbsp; &lt;chr&gt;&nbsp; &nbsp; &nbsp; &lt;chr&gt;&nbsp; &nbsp; &nbsp; &lt;chr&gt;&nbsp; &nbsp; &nbsp; &lt;chr&gt;&nbsp; &nbsp; &nbsp; &lt;chr&gt;&nbsp; &nbsp; &nbsp; &lt;chr&gt; &nbsp; &nbsp;<br>
1 5&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 5&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 6&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 6&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 5&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 6&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 1&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 6&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 6&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 4 &nbsp; &nbsp; &nbsp; &nbsp;<br>
2 6&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 6&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 5&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 1&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 1&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 2&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 3&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 6&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 6&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 1 &nbsp; &nbsp; &nbsp; &nbsp;<br>
3 6&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 6&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 6&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 1&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 1&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 6&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 1&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 6&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 6&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 6 &nbsp; &nbsp; &nbsp; &nbsp;<br>
4 4&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 4&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 3&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 4&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 5&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 5&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 2&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 3&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 5&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 3 &nbsp; &nbsp; &nbsp; &nbsp;<br>
5 6&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 7&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 7&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 5&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 1&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 5&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 1&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 7&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 5&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 1 &nbsp; &nbsp; &nbsp; &nbsp;<br>
6 6&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 6&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 6&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 3&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 1&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 3&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 5&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 6&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 6&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 5 &nbsp; &nbsp; &nbsp; &nbsp;<br>
# … with 28 more variables: att_1_pre &lt;dbl&gt;, WB_2_2_pre &lt;chr&gt;, WB_2_3_pre &lt;chr&gt;, WB_2_4_pre &lt;chr&gt;,<br>
# &nbsp; WB_2_5_pre &lt;chr&gt;, WB_2_6_pre &lt;chr&gt;, WB_2_7_pre &lt;chr&gt;, WB_2_8_pre &lt;chr&gt;, WB_2_9_pre &lt;chr&gt;, WB_1_1_post &lt;chr&gt;,<br>
# &nbsp; WB_1_2_post &lt;chr&gt;, WB_1_3_post &lt;chr&gt;, WB_1_4_post &lt;chr&gt;, WB_1_5_post &lt;chr&gt;, WB_1_6_post &lt;chr&gt;,<br>
# &nbsp; WB_1_7_post &lt;chr&gt;, WB_1_8_post &lt;chr&gt;, WB_1_9_post &lt;chr&gt;, WB_2_1_post &lt;chr&gt;, WB_2_2_post &lt;chr&gt;,<br>
# &nbsp; WB_2_3_post &lt;chr&gt;, WB_2_4_post &lt;chr&gt;, att_1_post &lt;dbl&gt;, WB_2_5_post &lt;chr&gt;, WB_2_6_post &lt;chr&gt;,<br>
# &nbsp; WB_2_7_post &lt;chr&gt;, WB_2_8_post &lt;chr&gt;, WB_2_9_post &lt;chr&gt;</td>
</tr>
</tbody>
</table>
<p>Because there are so many variables here R is only going to print out the first 10, then it puts a comment at the bottom that gives a brief description.</p>
<p>To see what the variable is saved as, look at the description under the variable name in the print out (or next to it in the comment section at the bottom).&nbsp;</p>
<ul>
<li><p>&lt;dbl&gt; = numeric</p></li>
<li><p>&lt;cha&gt; = character</p></li>
<li><p>&lt;fac&gt; = factor</p></li>
</ul>
<table class="caption-top table">
<colgroup>
<col style="width: 101%">
</colgroup>
<tbody>
<tr class="odd">
<td><p># A tibble: 6 × 1<br>
&nbsp; WB_1_1_pre<br>
&nbsp; &lt;chr&gt;</p>
<p># … with 28 more variables: att_1_pre &lt;dbl&gt;, WB_2_2_pre &lt;chr&gt;, WB_2_3_pre &lt;chr&gt;,</p></td>
</tr>
</tbody>
</table>
<section id="character-to-numeric-values" class="level4">
<h4 class="anchored" data-anchor-id="character-to-numeric-values">Character to Numeric Values</h4>
<p>To change variables to numeric use the mutate() function and the as.numeric() function</p>
<div class="sourceCode" id="cb24"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb24-1"><a href="#cb24-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Update them to numeric</span></span>
<span id="cb24-2"><a href="#cb24-2" aria-hidden="true" tabindex="-1"></a>data_clean <span class="ot">&lt;-</span></span>
<span id="cb24-3"><a href="#cb24-3" aria-hidden="true" tabindex="-1"></a>  data_clean <span class="sc">%\&gt;%</span></span>
<span id="cb24-4"><a href="#cb24-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">WB_1_1_pre =</span> <span class="fu">as.numeric</span>(WB_1_1_pre),</span>
<span id="cb24-5"><a href="#cb24-5" aria-hidden="true" tabindex="-1"></a>         <span class="at">WB_1_2_pre =</span> <span class="fu">as.numeric</span>(WB_1_2_pre),</span>
<span id="cb24-6"><a href="#cb24-6" aria-hidden="true" tabindex="-1"></a>         <span class="at">WB_1_3_pre =</span> <span class="fu">as.numeric</span>(WB_1_3_pre),</span>
<span id="cb24-7"><a href="#cb24-7" aria-hidden="true" tabindex="-1"></a>         <span class="at">WB_1_4_pre =</span> <span class="fu">as.numeric</span>(WB_1_4_pre),</span>
<span id="cb24-8"><a href="#cb24-8" aria-hidden="true" tabindex="-1"></a>         ... )            </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</section>
<section id="character-to-factor-variables" class="level4">
<h4 class="anchored" data-anchor-id="character-to-factor-variables">Character to Factor Variables</h4>
<p>To change character variables to factors, use the mutate() function and the factor() function</p>
<div class="sourceCode" id="cb25"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb25-1"><a href="#cb25-1" aria-hidden="true" tabindex="-1"></a><span class="co"># recode as factor</span></span>
<span id="cb25-2"><a href="#cb25-2" aria-hidden="true" tabindex="-1"></a>data_clean <span class="ot">&lt;-</span></span>
<span id="cb25-3"><a href="#cb25-3" aria-hidden="true" tabindex="-1"></a>  data_clean <span class="sc">%&gt;%</span></span>
<span id="cb25-4"><a href="#cb25-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">condition =</span> <span class="fu">factor</span>(condition, <span class="at">levels =</span> <span class="fu">c</span>(<span class="st">"top"</span>, <span class="st">"bottom"</span>, <span class="st">"journal"</span>)))</span>
<span id="cb25-5"><a href="#cb25-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb25-6"><a href="#cb25-6" aria-hidden="true" tabindex="-1"></a><span class="co"># Code notes:</span></span>
<span id="cb25-7"><a href="#cb25-7" aria-hidden="true" tabindex="-1"></a><span class="co"># You can specify the order of the factors with levels. You will need to make a list using c() for this to work</span></span>
<span id="cb25-8"><a href="#cb25-8" aria-hidden="true" tabindex="-1"></a><span class="co"># If you want to rename your factors, use labels = c() to give them new names</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>To view your new factor and levels to make sure it makes sense use:</p>
<table class="caption-top table">
<colgroup>
<col style="width: 52%">
</colgroup>
<tbody>
<tr class="odd">
<td>levels(data_clean$condition)<br>
[1] “top” &nbsp; &nbsp; “bottom”&nbsp; “journal”</td>
</tr>
</tbody>
</table>
<p>This will show you the order of the levels as well, so you can make sure they make sense.</p>
</section>
<section id="re-coding-scales" class="level4">
<h4 class="anchored" data-anchor-id="re-coding-scales">Re-coding Scales</h4>
<p>If you notice that there are some strange numbers in your scales and you need to recode them so they make sense with your original Likert scale, use the recode() function:</p>
<div class="sourceCode" id="cb26"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb26-1"><a href="#cb26-1" aria-hidden="true" tabindex="-1"></a><span class="co">#recode belief so it makes sense</span></span>
<span id="cb26-2"><a href="#cb26-2" aria-hidden="true" tabindex="-1"></a><span class="co"># 1 = 1, 2 = 2, 8 = 3, 9 = 4, 10 = 5</span></span>
<span id="cb26-3"><a href="#cb26-3" aria-hidden="true" tabindex="-1"></a>pilot_data_clean<span class="sc">$</span>belief <span class="ot">&lt;-</span></span>
<span id="cb26-4"><a href="#cb26-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">recode</span>(pilot_data_clean<span class="sc">$</span>belief, <span class="st">"1"</span> <span class="ot">=</span> <span class="dv">1</span>, <span class="st">"2"</span> <span class="ot">=</span> <span class="dv">2</span>, <span class="st">"8"</span> <span class="ot">=</span> <span class="dv">3</span>, <span class="st">"9"</span> <span class="ot">=</span> <span class="dv">4</span>, <span class="st">"10"</span> <span class="ot">=</span> <span class="dv">5</span>)</span>
<span id="cb26-5"><a href="#cb26-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb26-6"><a href="#cb26-6" aria-hidden="true" tabindex="-1"></a><span class="co"># Code notes:</span></span>
<span id="cb26-7"><a href="#cb26-7" aria-hidden="true" tabindex="-1"></a><span class="co"># this works on the format: old_value = new_value</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>You should also check here whether you have properly reverse scored any items that needs to be coded that way.</p>
</section>
</section>
<section id="creating-aggregate-scores-for-specific-measures" class="level3">
<h3 class="anchored" data-anchor-id="creating-aggregate-scores-for-specific-measures">Creating aggregate scores (for specific measures)</h3>
<p>You will now have a bunch of individual variables that need to be aggregated to make one total score for a measure.</p>
<p>Use the mutate() function and simple mathematical signs to calculate these. Here I add up all the responses for the well-being measure for the pre test and the post test separately and divide them by the number of items in each measure. This gives a proportional score for the measure.</p>
<div class="sourceCode" id="cb27"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb27-1"><a href="#cb27-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Create one score for Well-being Pre and wellbeing </span></span>
<span id="cb27-2"><a href="#cb27-2" aria-hidden="true" tabindex="-1"></a>postdata_clean <span class="ot">&lt;-</span></span>
<span id="cb27-3"><a href="#cb27-3" aria-hidden="true" tabindex="-1"></a>  data_clean <span class="sc">%&gt;%</span></span>
<span id="cb27-4"><a href="#cb27-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">WB_pre =</span> (WB_1_1_pre <span class="sc">+</span> WB_1_2_pre <span class="sc">+</span> WB_1_3_pre <span class="sc">+</span> WB_1_4_pre <span class="sc">+</span> WB_1_5_pre <span class="sc">+</span> WB_1_6_pre <span class="sc">+</span> WB_1_7_pre <span class="sc">+</span> WB_1_8_pre <span class="sc">+</span> WB_1_9_pre <span class="sc">+</span></span>
<span id="cb27-5"><a href="#cb27-5" aria-hidden="true" tabindex="-1"></a>                     WB_2_1_pre <span class="sc">+</span> WB_2_2_pre <span class="sc">+</span> WB_2_3_pre <span class="sc">+</span> WB_2_4_pre <span class="sc">+</span> WB_2_5_pre <span class="sc">+</span> WB_2_6_pre <span class="sc">+</span> WB_2_7_pre <span class="sc">+</span> WB_2_8_pre <span class="sc">+</span> WB_2_9_pre)<span class="sc">/</span><span class="dv">18</span>,</span>
<span id="cb27-6"><a href="#cb27-6" aria-hidden="true" tabindex="-1"></a>         <span class="at">WB_post =</span> (WB_1_1_post <span class="sc">+</span> WB_1_2_post <span class="sc">+</span> WB_1_3_post <span class="sc">+</span> WB_1_4_post <span class="sc">+</span> WB_1_5_post <span class="sc">+</span> WB_1_6_post <span class="sc">+</span> WB_1_7_post <span class="sc">+</span> WB_1_8_post <span class="sc">+</span> WB_1_9_post <span class="sc">+</span></span>
<span id="cb27-7"><a href="#cb27-7" aria-hidden="true" tabindex="-1"></a>                      WB_2_1_post <span class="sc">+</span> WB_2_2_post <span class="sc">+</span> WB_2_3_post <span class="sc">+</span> WB_2_4_post <span class="sc">+</span> WB_2_5_post <span class="sc">+</span> WB_2_6_post <span class="sc">+</span> WB_2_7_post <span class="sc">+</span> WB_2_8_post <span class="sc">+</span> WB_2_9_post)<span class="sc">/</span><span class="dv">18</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>Systematically go through each of your variables and create whatever aggregate score you need. Remember to give it a reasonable name so you can call it when you get to data analysis.</p>
</section>
<section id="ongoing-cleaning" class="level3">
<h3 class="anchored" data-anchor-id="ongoing-cleaning">Ongoing Cleaning</h3>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="images/ongoingcleaning.png" class="img-fluid quarto-figure quarto-figure-center figure-img" style="width:30.0%"></p>
</figure>
</div>
<p>There’s a very good chance that you’ll find things that need to still be cleaned up as you are running analyses. Rather than making those changes in your analysis scripts, go back and fix it in the cleaning document. Put the code in where it makes sense and re-run your cleaning script again.&nbsp;</p>
<p>The goal is to have your cleaning script do all the work of tidying up your data so your analysis scripts focus solely on calculating statistical test results.</p>


</section>
</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const onCopySuccess = function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  }
  const getTextToCopy = function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
    text: getTextToCopy
  });
  clipboard.on('success', onCopySuccess);
  if (window.document.getElementById('quarto-embedded-source-code-modal')) {
    // For code content inside modals, clipBoardJS needs to be initialized with a container option
    // TODO: Check when it could be a function (https://github.com/zenorocha/clipboard.js/issues/860)
    const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
      text: getTextToCopy,
      container: window.document.getElementById('quarto-embedded-source-code-modal')
    });
    clipboardModal.on('success', onCopySuccess);
  }
    var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
    var mailtoRegex = new RegExp(/^mailto:/);
      var filterRegex = new RegExp('/' + window.location.host + '/');
    var isInternal = (href) => {
        return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
    }
    // Inspect non-navigation links and adorn them if external
 	var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
    for (var i=0; i<links.length; i++) {
      const link = links[i];
      if (!isInternal(link.href)) {
        // undo the damage that might have been done by quarto-nav.js in the case of
        // links that we want to consider external
        if (link.dataset.originalHref !== undefined) {
          link.href = link.dataset.originalHref;
        }
      }
    }
  function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
    const config = {
      allowHTML: true,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start',
    };
    if (contentFn) {
      config.content = contentFn;
    }
    if (onTriggerFn) {
      config.onTrigger = onTriggerFn;
    }
    if (onUntriggerFn) {
      config.onUntrigger = onUntriggerFn;
    }
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      if (note) {
        return note.innerHTML;
      } else {
        return "";
      }
    });
  }
  const xrefs = window.document.querySelectorAll('a.quarto-xref');
  const processXRef = (id, note) => {
    // Strip column container classes
    const stripColumnClz = (el) => {
      el.classList.remove("page-full", "page-columns");
      if (el.children) {
        for (const child of el.children) {
          stripColumnClz(child);
        }
      }
    }
    stripColumnClz(note)
    if (id === null || id.startsWith('sec-')) {
      // Special case sections, only their first couple elements
      const container = document.createElement("div");
      if (note.children && note.children.length > 2) {
        container.appendChild(note.children[0].cloneNode(true));
        for (let i = 1; i < note.children.length; i++) {
          const child = note.children[i];
          if (child.tagName === "P" && child.innerText === "") {
            continue;
          } else {
            container.appendChild(child.cloneNode(true));
            break;
          }
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(container);
        }
        return container.innerHTML
      } else {
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        return note.innerHTML;
      }
    } else {
      // Remove any anchor links if they are present
      const anchorLink = note.querySelector('a.anchorjs-link');
      if (anchorLink) {
        anchorLink.remove();
      }
      if (window.Quarto?.typesetMath) {
        window.Quarto.typesetMath(note);
      }
      // TODO in 1.5, we should make sure this works without a callout special case
      if (note.classList.contains("callout")) {
        return note.outerHTML;
      } else {
        return note.innerHTML;
      }
    }
  }
  for (var i=0; i<xrefs.length; i++) {
    const xref = xrefs[i];
    tippyHover(xref, undefined, function(instance) {
      instance.disable();
      let url = xref.getAttribute('href');
      let hash = undefined; 
      if (url.startsWith('#')) {
        hash = url;
      } else {
        try { hash = new URL(url).hash; } catch {}
      }
      if (hash) {
        const id = hash.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note !== null) {
          try {
            const html = processXRef(id, note.cloneNode(true));
            instance.setContent(html);
          } finally {
            instance.enable();
            instance.show();
          }
        } else {
          // See if we can fetch this
          fetch(url.split('#')[0])
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.getElementById(id);
            if (note !== null) {
              const html = processXRef(id, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      } else {
        // See if we can fetch a full url (with no hash to target)
        // This is a special case and we should probably do some content thinning / targeting
        fetch(url)
        .then(res => res.text())
        .then(html => {
          const parser = new DOMParser();
          const htmlDoc = parser.parseFromString(html, "text/html");
          const note = htmlDoc.querySelector('main.content');
          if (note !== null) {
            // This should only happen for chapter cross references
            // (since there is no id in the URL)
            // remove the first header
            if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
              note.children[0].remove();
            }
            const html = processXRef(null, note);
            instance.setContent(html);
          } 
        }).finally(() => {
          instance.enable();
          instance.show();
        });
      }
    }, function(instance) {
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            div.style.left = 0;
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
        // Handle positioning of the toggle
    window.addEventListener(
      "resize",
      throttle(() => {
        elRect = undefined;
        if (selectedAnnoteEl) {
          selectCodeLines(selectedAnnoteEl);
        }
      }, 10)
    );
    function throttle(fn, ms) {
    let throttle = false;
    let timer;
      return (...args) => {
        if(!throttle) { // first call gets through
            fn.apply(this, args);
            throttle = true;
        } else { // all the others get throttled
            if(timer) clearTimeout(timer); // cancel #2
            timer = setTimeout(() => {
              fn.apply(this, args);
              timer = throttle = false;
            }, ms);
        }
      };
    }
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
<nav class="page-navigation">
  <div class="nav-page nav-page-previous">
      <a href="./downloading.html" class="pagination-link" aria-label="Downloading from Qualtics">
        <i class="bi bi-arrow-left-short"></i> <span class="nav-page-text">Downloading from Qualtics</span>
      </a>          
  </div>
  <div class="nav-page nav-page-next">
  </div>
</nav>
</div> <!-- /content -->




</body></html>